var u=Object.defineProperty;var m=(i,t,e)=>t in i?u(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>m(i,typeof t!="symbol"?t+"":t,e);import{p as l}from"./app-D7MfDG2y.js";/* empty css             */class p{constructor(t){a(this,"p");a(this,"particles",[]);a(this,"numParticles",150);a(this,"paths",[]);a(this,"mousePos");a(this,"interactionRadius",150);a(this,"currentStanza",0);a(this,"lastStanzaChange",0);a(this,"stanzaDuration",12e3);a(this,"leafParticles",[]);a(this,"numLeafParticles",50);a(this,"yellowWood");a(this,"autumnColors");this.p=t,this.mousePos=t.createVector(0,0),this.yellowWood=t.color(255,200,50),this.autumnColors=[t.color(255,200,50),t.color(255,150,0),t.color(200,100,0),t.color(255,100,50)],this.initializePaths(),this.initializeLeafParticles()}initializePaths(){const t=this.p.width*.2,e=this.p.height*.5,s=this.p.width*.4,h=this.p.width*.8;this.paths[0]=[this.p.createVector(t,e),this.p.createVector(s,e),this.p.createVector(s+(h-s)*.5,this.p.height*.35),this.p.createVector(h,this.p.height*.3)],this.paths[1]=[this.p.createVector(t,e),this.p.createVector(s,e),this.p.createVector(s+(h-s)*.5,this.p.height*.65),this.p.createVector(h,this.p.height*.7)];for(let o=0;o<this.numParticles;o++)this.createParticle()}initializeLeafParticles(){for(let t=0;t<this.numLeafParticles;t++)this.createLeafParticle()}createLeafParticle(){const t=this.p.random(this.p.width*.3,this.p.width*.7),e=this.p.random(this.p.height*.2,this.p.height*.8),s={pos:this.p.createVector(t,e),vel:this.p.createVector(this.p.random(-.5,.5),this.p.random(-.5,.5)),acc:this.p.createVector(0,0),color:this.p.random(this.autumnColors),size:this.p.random(3,6),path:[],maxPathLength:20,isActive:!0,targetPath:0,age:0,maxAge:this.p.random(200,400)};this.leafParticles.push(s)}createParticle(){const t=this.p.createVector(this.p.width*.2,this.p.height*.5+this.p.random(-20,20)),e={pos:t.copy(),vel:this.p.createVector(this.p.random(.5,1.5),0),acc:this.p.createVector(0,0),color:this.p.color(255,200,50,150),size:this.p.random(2,4),path:[t.copy()],maxPathLength:50,isActive:!0,targetPath:this.p.random()<.5?0:1,age:0,maxAge:this.p.random(300,500)};this.particles.push(e)}updateParticles(){const t=this.p.millis();t-this.lastStanzaChange>this.stanzaDuration&&(this.currentStanza=(this.currentStanza+1)%4,this.lastStanzaChange=t,this.resetParticles());for(let e of this.particles){if(!e.isActive)continue;if(e.age++,e.age>e.maxAge){e.isActive=!1,this.createParticle();continue}if(this.p.dist(e.pos.x,e.pos.y,this.mousePos.x,this.mousePos.y)<this.interactionRadius){const r=this.p.createVector(e.pos.x-this.mousePos.x,e.pos.y-this.mousePos.y);r.normalize(),r.mult(.5),e.acc.add(r)}const h=this.paths[e.targetPath],o=this.getPathProgress(e.pos,h);if(o!==null){const r=Math.min(o+.01,1),c=this.getBezierPoint(h,o),d=this.getBezierPoint(h,r),n=l.Vector.sub(d,c);n.normalize(),n.mult(.5),e.acc.add(n)}e.vel.add(e.acc),e.vel.limit(3),e.pos.add(e.vel),e.acc.mult(0),e.path.push(e.pos.copy()),e.path.length>e.maxPathLength&&e.path.shift(),e.pos.x>this.p.width*.9&&(e.isActive=!1,this.createParticle())}for(let e of this.leafParticles)if(e.isActive){if(e.age++,e.age>e.maxAge){e.isActive=!1,this.createLeafParticle();continue}e.acc.add(this.p.createVector(this.p.random(-.1,.1),this.p.random(-.1,.1))),e.acc.y+=.05,e.vel.add(e.acc),e.vel.limit(2),e.pos.add(e.vel),e.acc.mult(0),(e.pos.x<0||e.pos.x>this.p.width)&&(e.vel.x*=-.8),(e.pos.y<0||e.pos.y>this.p.height)&&(e.vel.y*=-.8),e.path.push(e.pos.copy()),e.path.length>e.maxPathLength&&e.path.shift()}}getPathProgress(t,e){let s=1/0,h=null;for(let o=0;o<=1;o+=.01){const r=this.getBezierPoint(e,o),c=this.p.dist(t.x,t.y,r.x,r.y);c<s&&(s=c,h=o)}return h}getBezierPoint(t,e){return t.length===4?this.p.createVector(this.p.bezierPoint(t[0].x,t[1].x,t[2].x,t[3].x,e),this.p.bezierPoint(t[0].y,t[1].y,t[2].y,t[3].y,e)):t[0]}resetParticles(){for(let t of this.particles)t.pos=this.p.createVector(this.p.width*.2,this.p.height*.5+this.p.random(-20,20)),t.vel=this.p.createVector(this.p.random(.5,1.5),0),t.acc=this.p.createVector(0,0),t.path=[t.pos.copy()],t.isActive=!0,t.targetPath=this.p.random()<.5?0:1,t.age=0}drawPaths(){this.p.stroke(255,100),this.p.strokeWeight(2),this.p.noFill();for(let t of this.paths)this.p.beginShape(),this.p.bezier(t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),this.p.endShape()}drawParticles(){for(let t of this.particles)if(t.isActive){this.p.noFill(),this.p.stroke(t.color),this.p.strokeWeight(t.size*.5),this.p.beginShape();for(let e of t.path)this.p.vertex(e.x,e.y);this.p.endShape(),this.p.noStroke(),this.p.fill(t.color),this.p.circle(t.pos.x,t.pos.y,t.size)}for(let t of this.leafParticles)t.isActive&&(this.p.noStroke(),this.p.fill(t.color),this.p.push(),this.p.translate(t.pos.x,t.pos.y),this.p.rotate(t.vel.heading()),this.p.beginShape(),this.p.vertex(0,-t.size),this.p.vertex(t.size,0),this.p.vertex(0,t.size),this.p.vertex(-t.size,0),this.p.endShape(this.p.CLOSE),this.p.pop())}draw(){this.p.background(20,20,30),this.p.noStroke();for(let t=0;t<100;t++){const e=this.p.random(this.p.width),s=this.p.random(this.p.height),h=this.p.random(20,40);this.p.fill(this.yellowWood),this.p.circle(e,s,h)}this.drawPaths(),this.updateParticles(),this.drawParticles()}mouseMoved(t,e){this.mousePos.set(t,e)}}function f(i){let t;i.setup=()=>{const e=document.getElementById("sketch-container");if(!e){console.error("Sketch container not found");return}i.createCanvas(e.clientWidth,e.clientHeight).parent("sketch-container"),t=new p(i)},i.draw=()=>{t.draw()},i.mouseMoved=()=>{t.mouseMoved(i.mouseX,i.mouseY)},i.windowResized=()=>{i.resizeCanvas(window.innerWidth,window.innerHeight),t=new p(i)}}new l(f);
//# sourceMappingURL=road-C53tVxHr.js.map
